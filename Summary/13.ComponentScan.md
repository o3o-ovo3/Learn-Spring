# 인프런 - 스프링 입문 강의 내용 정리

### 13. 컴포넌트 스캔과 자동 의존관계 설정

- 스프링빈을 등록하고, 의존관계 설정하기
  - 멤버 컨트롤러가 멤버 서비스를 통해서 회원가입을 하고 멤버 서비스를 통해 데이터를 조회할 수 있어야 한다.
    - 이것을 멤버 컨트롤러가 멤버 서비스를 의존한다. 의존관계가 있다고 표현한다.

<br/>

- 멤버 컨트롤러 작성
  - Controller 클래스를 만들어 애너테이션을 붙여놓기까지만 해도
    - Spring container가 객체를 생성해서 spring에 넣어두고, 이를 스프링이 관리하게 된다.
    - 즉, 스프링 빈이 관리된다.

<br/>

- 스프링이 관리하게 하기 위해서
  - 다 스프링 컨테이너에 등록하고 스프링 컨테이너에게서 받아 쓸 수 있도록 바꾸어야 한다.
    - new 를 이용해서 MemberService에 접근하면 MemberController 말고도 다른 컨트롤러들이 그것을 사용할 수 있다.
  - 여러개를 생성할 필요 없이 하나만 생성해서 그것을 다같이 공유해서 쓰면된다.
  - @Autowired : 멤버 컨트롤러가 생성될 때 이 생성자를 호출하는데, 생성자에 이 애너테이션이 붙어있으면 스프링 컨테이너에 있는 MemberService를 스프링이 연결 시켜준다.
    -  MemberService가 스프링에서 서비스로 관리 되려면 똑같이 @Service 를 붙여야한다.
    -  리포지토리로 마찬가지 (@Repository)
    -  이것이 정형화된 스프링의 패턴이다.

<br/>

-  컨트롤러가 생성될 때 스프링 빈에 등록되어있는 멤버 서비스 객체를 가져다가 넣어준다.
   - 스프링이 Dependency Injection 했다고 표현한다.
   - 멤버 서비스가 생성될 때 스프링 빈에 등록되어있는 멤버 리포지토리 객체를 스프링이 넣어준다.

<br/>

- 스프링 빈을 등록하는 두가지 방법

  - 컴포넌트 스캔과 자동 의존관계 설정

    - 애너테이션을 이용한 것
    - @Component 애너테이션이 있으면 컨테이너가 스캐닝하여 빈으로 자동 등록한다.
    - 이들은 autowired로 연결된다.
    - @Controller, @Service, @Repository도 @Componenet 를 포함하고 있기 때문에 빈으로 자동 등록된다.

    <br/>

  - 자바 코드로 직접 스프링 빈 등록

<br/>

+) 참고

- 스프링은 스프링 컨테이너에 빈을 등록할 때 싱글톤으로 등록한다.
  - 즉, 유일하게 하나만 등록해서 공유한다.
  - 빈이 같으면 모두 같은 인스턴스이다.
  - 설정으로 싱글톤이 아니게 할 수 있지만 웬만하면 싱글톤을 사용한다.
