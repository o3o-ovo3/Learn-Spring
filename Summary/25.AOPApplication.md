# 인프런 - 스프링 입문 강의 내용 정리

### 25. AOP 적용

- AOP 
  - Aspect Oriented Programming
  - 관점 지향 프로그래밍
  - 공통 관심 사황과 핵심 관심 사항을 분리하는 것
    - 시간 측정 로직은 메소드에 그냥 붙이는 게 아니라,
    - 시간 측정 로직을 한 군데에 모으고 필요한 데에다 적용하는 것이다.

<br/>

- 스프링에서도 AOP 적용 기능을 제공한다.
  - AOP 를 작성할 때에는 @Aspect 애너테이션을 붙여준다.
  - aop 패키지에 TimeTraceAop 클래스를 작성하여 시간 측정 공통 관심 사항을 별도의 로직으로 만든다.
  - 이렇게 하여 회원가입, 회원 조회 등 핵심 관심 사항과 시간을 측정하는 공통 관심 사항을 분리한다.
    - 핵심 관심 사항을 깔끔하게 유지할 수 있다.
    - 변경이 필요하면 이 로직만 수정하면 된다.
    - 원하는 적용 대상을 정할 수 있다. (@Around 애너테이션 사용)

<br/>

- 스프링의 AOP 동작 방식
  - 적용 전
    - 컨트롤러가 서비스를 의존하고 있어서 컨트롤러에서 호출하면 서비스의 메소드가 호출되었다. 
  - 적용 후
    - 적용 범위를 지정한다.
    - 서비스가 지정되면 각자 멤버 서비스인 프록시를 만들어 이 가짜 스프링 빈을 앞에 세운다.
    - 이것이 끝나면 joinPoint.proceed()가 호출되면서 실제 서비스가 실행된다.
    - 즉, 컨트롤러(헬로 컨트롤러)가 호출하는 것은 진짜 서비스(멤버 서비스)가 아니고 프록시라는 기술로 발생하는 가짜 멤버 서비스이다.
